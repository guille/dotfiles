#!/usr/bin/env bash
# shellcheck disable=SC1091

set -e

source "$SCRIPT_BASE_DIR/common"

##
# Installs zsh plugins and symlinks the config(s)
##

module_name=zsh

##
# zsh plugins
##

git submodule update --init

[ -L ~/.powerlevel10k ] && unlink ~/.powerlevel10k
infoprint "[$module_name] linking powerlevel10k..."
ln -sfv "${SCRIPT_BASE_DIR}/$module_name/powerlevel10k" ~/.powerlevel10k 1> /dev/null

[ -L ~/.fzf-tab ] && unlink ~/.fzf-tab
infoprint "[$module_name] linking fzf-tab..."
ln -sfv "${SCRIPT_BASE_DIR}/$module_name/fzf-tab" ~/.fzf-tab 1> /dev/null


##
# symlinks
##

infoprint "[$module_name] creating dotfiles symlinks..."

ln -sfv "${SCRIPT_BASE_DIR}/$module_name/zshrc.zsh" ~/.zshrc 1> /dev/null
ln -sfv "${SCRIPT_BASE_DIR}/$module_name/zprofile.zsh" ~/.zprofile 1> /dev/null
ln -sfv "${SCRIPT_BASE_DIR}/$module_name/zshenv.zsh" ~/.zshenv 1> /dev/null
ln -sfv "${SCRIPT_BASE_DIR}/$module_name/zkeys.zsh" ~/.zkeys 1> /dev/null
ln -sfv "${SCRIPT_BASE_DIR}/$module_name/zaliases.zsh" ~/.zaliases 1> /dev/null

ln -sfv "${SCRIPT_BASE_DIR}/$module_name/zvars" ~/.zvars 1> /dev/null

ln -sfv "${SCRIPT_BASE_DIR}/$module_name/p10k.zsh" ~/.p10k.zsh 1> /dev/null
ln -sfv "${SCRIPT_BASE_DIR}/$module_name/p10k.mise.zsh" ~/.p10k.mise.zsh 1> /dev/null

ln -sfv "${SCRIPT_BASE_DIR}/$module_name/zsh-history-substring-search.zsh" ~/.zhist_substr 1> /dev/null
